<div
    class="widget-calendar-wrapper relative w-full h-screen flex flex-row flex-nowrap bg-white min-h-screen"
>
    <!-- left menu-->
    <left-menu
      #leftMenu
      [date]="externalRequestDate()"
      (calendarDatepicker)="dateSelected.set($event)"
      (calendarClose)="calendarClosed.emit()"
    >
      <ng-template #loader>
        <ng-container *ngTemplateOutlet="loaderRef; context:{'calendarGotLoading': calendarGotLoading()}"></ng-container>
        <!-- default loader -->
        <loader-widget *ngIf="!loaderRef && calendarGotLoading()" />
      </ng-template>

      <ng-template #closeButton let-calendarClose="calendarClose">
        <ng-container *ngTemplateOutlet="closeButtonRef; context:{'calendarClose':calendarClose}"></ng-container>
        <!-- default close button -->
        <close-button *ngIf="!closeButtonRef" (tap)="calendarClose.emit()" />
      </ng-template>
    </left-menu>

    <!-- calendar base-->
    <div
      class="calendar-base w-full grow border border-white bg-white p-4 pb-0"
    >
      <!-- calendar base header -->
      <header-comp>
        <!--Arrows-->
        <calendar-arrows
          (left)="leftMenuChild.datepicked.set(prevDate(dateSelected()))"
          (right)="leftMenuChild.datepicked.set(nextDate(dateSelected()))"
          [label]="getSelectedDateLabel"
          [rightSwitchArrow]="rightSwitchArrowRef"
          [leftSwitchArrow]="leftSwitchArrowRef"
        />
        <!-- DayToggle-->
        <view-toggle
          #viewToggle
          (viewChanged)="defineView.set($event)"
          [view]="view"
        />
        <!--Search-->
        <calendar-search
          (typingFinish)="runSearch($event)"
          [placeholder]="configs().searchPlaceholder"
          [searchIcon]="searchIconRef"
        />
      </header-comp>
      <!--calendar-->
      <div
        data-widget-item="widget-calendar-comp"
        class="calendar-wrapper w-full mt-4 overflow-y-auto custom-scrll"
      >
        <!--calendar week-view-->
        <ng-container *ngIf="defineView() === 'week'">
          <week-view 
            [weekDays]="weekDays()"
            [dateSelected]="dateSelected()"
            [dayTimes]="dayTimes()" 
          />
        </ng-container>
        

        <!--calendar day-view-->
        <ng-container *ngIf="defineView() === 'day'">
          <day-view 
            [dateSelected]="dateSelected()" 
            [dayTimes]="dayTimes()" 
          />
        </ng-container>

        
        <!--calendar month-view-->
        <ng-container *ngIf="defineView() === 'month'">
          <month-view 
            [weekDays]="weekDays()" 
            [monthDays]="monthDays()" 
            [dateSelected]="dateSelected()" 
          />
        </ng-container>
        
      </div>
    </div>

</div>